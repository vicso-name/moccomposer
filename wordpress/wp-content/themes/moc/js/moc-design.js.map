{"version":3,"sources":["design.js","index.js"],"names":["design","jQuery","length","parallaxEnd","$w","window","startHeight","frameHeight","innerHeight","frameWidth","innerWidth","mobileBrowser","EdgeIeBrowser","isParallax","animatedTop","config","background","midground","foreground","getInTouchBtn","customScrollBtn","setupAnimation","offset","top","navigator","userAgent","indexOf","this","setupMobileAnimation","setupDesktopAnimation","animateSlides","desktopController","ScrollMagic","Controller","slides","document","querySelectorAll","wipeAnimationText","textTween","imgTween","textScene","i","slideNum","TimelineMax","fromTo","y","ease","Linear","easeOut","force3D","TweenMax","to","add","height","Scene","triggerElement","triggerHook","duration","scrollOffset","setPin","setTween","addTo","on","event","thisBlock","fixedBlock","find","scrollDirection","css","attr","slideWrappers","sliderController","j","resizeTimer","that","setTimeout","fixImages","e","clearTimeout","ParallaxEffect","fixMobileHeight","args","push","scrollTop","setPosition","requestAnimationFrame","bind","arguments","coeff","parseInt","imgClass","imgOriginalHeight","wrapperHeight","imgOffset","imgFg","addMargin","closest","marginTop","goToForm","preventDefault","removeClass","animate","customScroll","targetOffset","targetTag","hasAttribute","init","screen","screenHeight","documentElement","clientHeight","designLoaded","addEventListener"],"mappings":"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","file":"moc-design.js","sourcesContent":["function design() {\r\n\r\n    if ((jQuery(\".page-design\").length)) {\r\n        var $w = jQuery(window),\r\n            startHeight = 1,\r\n            frameHeight = $w.innerHeight,\r\n            frameWidth = $w.innerWidth,\r\n            mobileBrowser = window.mobileBrowser,\r\n            EdgeIeBrowser = false,\r\n\r\n            scrollEventDuration = 1600,\r\n            scrollOffset = 0,\r\n\r\n        // all event and functions for parallax\r\n            parallaxOffset = 1,\r\n            isParallax = false,\r\n            animatedTop = false,\r\n            parallaxEnd;\r\n\r\n        var design = {\r\n            config: {\r\n                background: jQuery('.background'),\r\n                midground: jQuery('.midground'),\r\n                foreground: jQuery('.foreground'),\r\n                getInTouchBtn: jQuery('[data-get-in-touch]'),\r\n                customScrollBtn: jQuery('[data-custom-scroll]')\r\n            },\r\n\r\n            setupAnimation: function() {\r\n                parallaxEnd =jQuery('#wrapper1').offset().top - (50 + parallaxOffset);\r\n                if ((window.navigator.userAgent.indexOf(\"Edge\") > -1) || (window.navigator.userAgent.indexOf(\"rv:11\") > -1)) {\r\n                    EdgeIeBrowser = true;\r\n                };\r\n                if (mobileBrowser) {\r\n                    this.setupMobileAnimation();\r\n                }\r\n                else {\r\n                    this.setupDesktopAnimation();\r\n                }\r\n            },\r\n\r\n            animateSlides: function() {\r\n\r\n                var desktopController = new ScrollMagic.Controller(),\r\n                    slides = document.querySelectorAll(\".animation-slide\"),\r\n\r\n                    wipeAnimationText = [],\r\n                    textTween = [],\r\n                    imgTween = [],\r\n                    textScene = [];\r\n\r\n                if (mobileBrowser) { return }\r\n                else {\r\n                    for (var i=0; i<slides.length; i++) {\r\n                        var slideNum = i+1;\r\n\r\n                        wipeAnimationText[i] = new TimelineMax()\r\n                            .fromTo(jQuery(\"#text-part\"+slideNum), 1, {y: \"0\"}, {y: \"-50%\", ease: Linear.easeOut, force3D: true});\r\n                        textTween[i] = new TweenMax.to(jQuery(\"#text-part\"+slideNum), 1, {y: \"-50%\", ease: Linear.easeOut});\r\n                        wipeAnimationText[i].add(textTween[i], 0);\r\n                        imgTween[i] = new TweenMax.to(jQuery(\"#img-part\"+slideNum+\" .sliding-part\"), 1, {height: \"0\", ease: Linear.easeOut});\r\n                        wipeAnimationText[i].add(imgTween[i], 0);\r\n\r\n                        textScene[i] = new ScrollMagic.Scene({\r\n                            triggerElement: \"#wrapper\"+slideNum,\r\n                            triggerHook: 0,\r\n                            duration: \"100%\",\r\n                            offset: scrollOffset*(-1)\r\n                        })\r\n                            .setPin(\"#wrapper\"+slideNum)\r\n                            .setTween(wipeAnimationText[i])\r\n                            // .addIndicators() // add indicators (requires plugin)\r\n                            .addTo(desktopController);\r\n\r\n                        textScene[i].on(\"start\", function (event) {\r\n                            var thisBlock = this.triggerElement(),\r\n                                fixedBlock = jQuery(thisBlock).find('.animated-part__wrapper');\r\n\r\n                            if (event.scrollDirection==='REVERSE') {\r\n                                fixedBlock.css('position', '');\r\n                            }\r\n                            else {\r\n                                fixedBlock.css('position', 'fixed');\r\n                            };\r\n                        });\r\n                        textScene[i].on(\"end\", function (event) {\r\n                            var thisBlock = this.triggerElement(),\r\n                                fixedBlock = jQuery(thisBlock).find('.animated-part__wrapper');\r\n\r\n                            if (event.scrollDirection==='FORWARD') {\r\n                                if (fixedBlock.attr('id') !== 'animation2')\r\n                                    fixedBlock.css('position', '');\r\n                            }\r\n                            else {\r\n                                fixedBlock.css('position', 'fixed');\r\n                            };\r\n                        });\r\n                    };\r\n                };\r\n\r\n                if (! (EdgeIeBrowser || mobileBrowser) ) {\r\n                // slider behavior\r\n                var slideWrappers = document.querySelectorAll(\"#wrapper2\"),\r\n                    sliderController = new ScrollMagic.Controller(),\r\n                    thirdScene;\r\n\r\n                for (var j=0; j<slideWrappers.length; j++) {\r\n\r\n                    thirdScene = new ScrollMagic.Scene({\r\n                        triggerHook: 0,\r\n                        triggerElement: slideWrappers[j]\r\n                    })\r\n                        .setPin(slideWrappers[j])\r\n                        // .addIndicators() // add indicators (requires plugin)\r\n                        .addTo(sliderController);\r\n                };\r\n\r\n            }\r\n        },\r\n\r\n            setupDesktopAnimation: function() {\r\n                //fix images position\r\n                var that = this;\r\n                setTimeout(function() {\r\n                    that.fixImages('img-fg');\r\n                }, 150);\r\n\r\n                var resizeTimer;\r\n\r\n                $w.on('resize', function(e) {\r\n                    var that = this;\r\n                    clearTimeout(resizeTimer);\r\n                    resizeTimer = setTimeout(function() {\r\n                        that.fixImages('img-fg');// Run code here, resizing has \"stopped\"\r\n\r\n                    }, 250);\r\n\r\n                });\r\n\r\n                this.ParallaxEffect();\r\n\r\n                // $w.scroll(function() {\r\n                //     design.ParallaxEffect();\r\n                // });\r\n            },\r\n\r\n            setupMobileAnimation: function() {\r\n\r\n                this.ParallaxEffect();\r\n\r\n                fixMobileHeight();\r\n\r\n                var resizeTimer;\r\n\r\n                $w.on('resize', function(e) {\r\n                    var that = this;\r\n                    clearTimeout(resizeTimer);\r\n                    resizeTimer = setTimeout(function() {\r\n                        fixMobileHeight();\r\n\r\n                    }, 250);\r\n\r\n                });\r\n            },\r\n\r\n            ParallaxEffect: function () {\r\n                var args = [];\r\n                args.push(this.config.foreground, this.config.midground);\r\n                if (!mobileBrowser) args.push(this.config.background);\r\n                var scrollTop = $w.scrollTop();\r\n\r\n                isParallax = (scrollTop < (parallaxEnd) );\r\n                if (scrollTop < parallaxEnd ) {\r\n\r\n                    if (animatedTop) setTimeout(function () {\r\n                        animatedTop = false\r\n                    }, 100);\r\n                }\r\n                if (isParallax) {\r\n                    this.setPosition(scrollTop, args);\r\n                }\r\n                else {\r\n                    isParallax = false;\r\n                    if (!animatedTop) {\r\n                        animatedTop = true;\r\n                        this.setPosition(5000, args);\r\n                    }\r\n                }\r\n                // if (mobileBrowser)\r\n                window.requestAnimationFrame(this.ParallaxEffect.bind(this));\r\n            },\r\n\r\n            setPosition: function(scrollTop){\r\n                var args = arguments[1];\r\n                for (var i=0; i<args.length; i++) {\r\n                    var coeff = i/2+1.05;\r\n                    args[i].attr('style', 'transform: translate3d(0, -'+parseInt(scrollTop / coeff)+'px, 0);-webkit-transform: translate3d(0, -'+parseInt(scrollTop / coeff )+'px, 0);');\r\n                };\r\n            },\r\n\r\n            fixImages: function (imgClass) {\r\n                var imgFg = document.querySelectorAll(\".\"+imgClass),\r\n                    imgOriginalHeight,\r\n                    wrapperHeight,\r\n                    imgOffset,\r\n                    addMargin = true;\r\n                if (frameWidth < frameHeight) {\r\n                    addMargin = false;\r\n                }\r\n                parallaxEnd =jQuery('#wrapper1').offset().top - 40 + parallaxOffset;\r\n                if (!mobileBrowser) {\r\n                    for (var i=0; i<imgFg.length; i++) {\r\n                        imgOriginalHeight = 0;\r\n                        imgOffset = 0;\r\n                        wrapperHeight = 0;\r\n                        wrapperHeight = jQuery(imgFg[i]).closest('.img-wrapper-part').height();\r\n                        if (addMargin) {\r\n                            imgOriginalHeight = jQuery(imgFg[i]).height();\r\n                            imgOffset = ((wrapperHeight - imgOriginalHeight)/2>0) ? parseInt((wrapperHeight - imgOriginalHeight)/2) : 0;\r\n                        };\r\n                        jQuery(imgFg[i]).css({'marginTop': imgOffset});\r\n                    }\r\n                }\r\n            },\r\n\r\n            goToForm: function (e) {\r\n                e.preventDefault();\r\n                //close mobile menu if opened\r\n                jQuery('[data-menu]').removeClass('menu-opened');\r\n                jQuery('body').removeClass('with-menu-opened');\r\n                jQuery('html, body').animate({\r\n                    scrollTop: jQuery(\"#estimate-project-form\").offset().top - 40\r\n                }, 800);\r\n            },\r\n\r\n            customScroll: function(e) {\r\n                e.preventDefault();\r\n                var targetTag = jQuery(this).attr('data-custom-scroll'),\r\n                    targetOffset;\r\n                if (jQuery(this)[0].hasAttribute('data-bottom')) {\r\n                    targetOffset = jQuery('#'+targetTag).offset().top + jQuery('#'+targetTag).height();\r\n                }\r\n                else {\r\n                    targetOffset = jQuery('#'+targetTag).offset().top  - scrollOffset;\r\n                }\r\n                jQuery('html, body').animate({\r\n                    scrollTop:  targetOffset}, scrollEventDuration);\r\n            },\r\n            //    init\r\n            init: function () {\r\n                this.setupAnimation();\r\n                if (!mobileBrowser) this.animateSlides();\r\n                //this.config.getInTouchBtn.on('click', this.goToForm);\r\n                this.config.customScrollBtn.on('click', this.customScroll)\r\n            }\r\n        };\r\n        //run\r\n        design.init();\r\n\r\n    };\r\n\r\n    function fixMobileHeight() {\r\n        var viewportHeight = screen.height;\r\n        var screenHeight = document.documentElement.clientHeight;\r\n        if ((screenHeight/startHeight <= 0.75)|| (startHeight/screenHeight <= 0.75)) {\r\n            jQuery('.js-full-height').css('height', screenHeight);\r\n            startHeight = screenHeight;\r\n        }\r\n\r\n    }\r\n\r\n};\r\n","\r\ndocument.addEventListener(\"DOMContentLoaded\", designLoaded);\r\n\r\nfunction designLoaded() {\r\n  design();\r\n}\r\n"]}