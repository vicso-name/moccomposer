"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function blog(){if(jQuery(".blog-wrap").length||jQuery(".single-blogpost-wrap").length||jQuery(".kb-post").length||jQuery(".search").length){var e=document.documentElement.clientWidth,t=6,o=!1,a={config:{subscribeBlock:jQuery("#subscribe-block"),subscribeLink:jQuery('[data-open-menu="subscribe"]'),downloadLink:jQuery('[data-open-menu="download"]'),subscribeCloseLink:jQuery("#subscribe-close-btn"),downloadCloseLink:jQuery("#download-close-btn"),subscribeBtn:jQuery("#subscribe-btn"),subscribeEmailField:jQuery("#subscribe-block").find('input[type="email"]'),nav:jQuery("#top_bar").find("ul.get-in-touch-wrapper"),search:jQuery(".search-overlay"),subscribeWindow:jQuery(window),subscribeBody:jQuery("body"),searchBtn:jQuery("#top_bar").find("#search-nav"),loadMore:jQuery("#load-more-posts"),blogList:jQuery("#blog-list"),socialWrap:jQuery("#post-social"),topSocialWrap:jQuery("#top-post-social"),facebookSvg:"<svg aria-label='Share to Facebook'><use xlink:href='#social-facebook'></use></svg>",twitterSvg:"<svg aria-label='Share to Twitter'><use xlink:href='#social-twitter'></use></svg>",linkedinSvg:"<svg aria-label='Share to Linkedin'><use xlink:href='#social-linkedin'></use></svg>",googleSvg:"<svg aria-label='Share to Google'><use xlink:href='#social-google'></use></svg>",feedbackForm:jQuery("#feedback_form"),feedbackBlock:jQuery("#feedback_form").find(".feedback-block"),feedbackControlsBlock:jQuery("#feedback-conrols-wrapper")},unFocusSubscribe:function(){var t=document.documentElement.clientWidth;t!==e&&(a.config.subscribeEmailField.blur(),e=t)},addSearch:function(){this.config.searchBtn=jQuery("#search-nav"),this.config.searchCloseBtn=jQuery("#search-close-btn"),this.config.searchIcon=jQuery("#search-icon")},preLoadPosts:function(){var e=parseInt(window.location.hash.substring([1]));e>7&&(t=e-7,a.ajaxPostsLoader())},ajaxPostsLoader:function(){a.showOverlay(),void 0!==("undefined"==typeof blogVars?"undefined":_typeof(blogVars))&&(blogVars.ajaxUrl=jQuery("#blog-vars").html());var e=a.config.blogList.find("li").length;$.ajax({type:"POST",url:blogVars.ajaxUrl,data:{action:"load_posts",from_num:e,count:t},success:function(e){e=JSON.parse(e),a.loadMoreSuccess(e)}})},loadMore:function(e){e.preventDefault(),t=6,a.ajaxPostsLoader()},loadMoreSuccess:function(e){a.preloadImages(e.images,"addNewPosts",e)},addNewPosts:function(e){e&&a.config.blogList.append(e.html),e&&!e.posts_end||a.config.loadMore.hide(),a.hideOverlay(),window.location.hash=a.config.blogList.find("li").length},preloadImages:function(e,t,o){var n,s=[],i=0,r=e.length;for(n=0;n<r;n++)s[n]=new Image,s[n].onload=function(){i++,r===i&&a.addNewPosts(o)},s[n].onerror=function(){a.hideOverlay(),a.config.loadMore.hide()},s[n].src=e[n]},showOverlay:function(){jQuery("#load-more-posts").addClass("with-loader")},hideOverlay:function(){jQuery("#load-more-posts").removeClass("with-loader")},addSocialSvg:function(){function e(e){e.find(".ssba_facebook_share").append(a.config.facebookSvg),e.find(".ssba_twitter_share").append(a.config.twitterSvg),e.find(".ssba_linkedin_share").append(a.config.linkedinSvg),e.find(".ssba_google_share").append(a.config.googleSvg)}a.config.socialWrap.length&&e(a.config.socialWrap),a.config.topSocialWrap.length&&e(a.config.topSocialWrap),function(e){var t,a=window,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=(a.innerWidth,a.innerHeight),i=(a.pageYOffset,document.body.getBoundingClientRect().height),r=document.querySelector(".main-footer").offsetHeight,c=i-r-s;if(n)return;function l(){a.innerWidth,s=a.innerHeight,a.pageYOffset,i=document.body.offsetHeight,r=document.querySelector(".main-footer").offsetHeight,c=i-r-s}function d(e,t,a,n){e<t||e>a?o&&(n.addClass("invisible"),o=!1):o||(n.removeClass("invisible"),l(),o=!0)}a.addEventListener("scroll",(function(t){d(a.pageYOffset,s,c,e)})),a.addEventListener("resize",(function(){clearTimeout(t),t=setTimeout((function(){l(),d(a.pageYOffset,s,c,e)}),150)}))}(a.config.socialWrap)},fixTargetBlank:function(){(navigator.userAgent.indexOf("FBAN")>-1||navigator.userAgent.indexOf("FBAV")>-1)&&jQuery(".blog-post-content").find("a").each((function(){this.removeAttribute("target")}))},highlightCode:function(){setTimeout((function(){jQuery("p code").each((function(e,t){hljs.highlightBlock(t)}))}),1e3)},showFeedback:function(){var e;getCookie("feedback"+jQuery("#post_id").val())?(e="feedback-responded",this.config.feedbackControlsBlock.html("")):e="feedback-visible",this.config.feedbackBlock.addClass(e)},init:function(){this.addSearch(),this.config.subscribeWindow.on("resize",this.unFocusSubscribe),this.config.loadMore.on("click",this.loadMore),this.addSocialSvg(),this.preLoadPosts(),this.fixTargetBlank(),this.highlightCode(),this.showFeedback()}};a.init(),jQuery("#negative-submit").click((function(){jQuery("form.blog_feedback").find("#feedback_type").val("No")})),jQuery("#feedback-content").on("keyup",(function(){""==this.value?jQuery(".grey-btn").addClass("disabled").attr("disabled",!0):jQuery(".grey-btn").removeClass("disabled").attr("disabled",!1)})),jQuery("#feedback-content").on("blur",(function(){var e=this;""==e.value?(jQuery(e).removeClass("filled"),jQuery(".grey-btn").addClass("disabled").attr("disabled",!0)):jQuery(e).addClass("filled")})),jQuery(document).on("click",'[data-send="feedback"]',(function(e){e.preventDefault(),jQuery(".feedback-btn").addClass("disabled").attr("disabled",!0),jQuery('[data-send="feedback"]').addClass("disabled").attr("disabled",!0),jQuery("body").removeClass("with-menu-opened");var t=window.location.origin,o=jQuery("form.blog_feedback"),a=o.find("#post_id").val(),n=o.find("#feedback_type").val(),s=o.find("#feedback-content").val(),i=o.find(".post-title").val(),r=o.find(".feedback_info").val(),c=o.find(".feedback_ip").val(),l=o.find(".email-list").val();return s.length>600&&(s=s.substring(0,599)),jQuery(".feedback-block").addClass("feedback-done"),jQuery('[data-popup="feedback"]').removeClass("popup-fixed"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&jQuery("html, body").animate({scrollTop:jQuery("#feedback_form").offset().top-200},800),$.ajax({type:"POST",url:t+"/wp-admin/admin-ajax.php",data:{post_id:a,feedback_like:n,feedback_content:s,post_title:i,feedback_info:r,feedback_ip:c,email_list:l,action:"save_feedback"}}).done((function(){})).fail((function(){console.log("something happened - feedback didn't sent:(")})).always((function(){if(document.cookie){var e=jQuery("#post_id").val();void 0!==e&&(document.cookie="feedback"+e+"=true")}})),!1}))}if(document.addEventListener("copy",(function(){var e=window.getSelection(),t=document.location.href,o=e+"<br>Read more at: <a href='"+t+"'>"+t+"</a>",a=document.createElement("div");a.style.position="absolute",a.style.left="-99999px",document.body.appendChild(a),a.innerHTML=o,e.selectAllChildren(a),window.setTimeout((function(){document.body.removeChild(a)}),100)})),jQuery(".contact-form-wrapper").length){var n=document.querySelectorAll(".form-control");try{for(var s=0;s<n.length;s++){var i=n[s];c(i),i.addEventListener("focus",(function(){r(this)})),i.addEventListener("blur",(function(){c(this)}))}}catch(e){console.log("not supported"),jQuery(".label").addClass("unfocus-label")}}function r(e){var t=document.querySelector('label[for="'+e.getAttribute("id")+'"]');null!==t&&t.classList.remove("unfocus-label")}function c(e){var t=document.querySelector('label[for="'+e.getAttribute("id")+'"]');null!==t&&(""===e.value?(e.classList.remove("filled"),t.classList.add("unfocus-label")):(e.classList.add("filled"),t.classList.remove("unfocus-label")))}if(jQuery(".subscribe-block").length){var l=function(e){jQuery("".concat(e," .wpcf7")).on("wpcf7mailsent",(function(){$(this).find("input").css("display","none"),$(this).closest("".concat(e)).find(".subscribe-title").css("display","none"),$(this).closest("".concat(e)).find(".confirmation-text").css("display","none"),$(this).closest("".concat(e)).find(".subscribe-input-wrapper").css("display","none"),$(this).closest("".concat(e)).find(".wpcf7-response-output").css("display","none"),$(this).closest("".concat(e)).find(".response").css("display","block"),$(this).closest("".concat(e)).find(".show-on-success").css("display","block"),$(this).closest("".concat(e)).find(".icon--order-success").addClass("onshow")}))};l("#subscribe-block"),l("#download-block")}var d,u,f,p=$(".blog-download-block .js-download-pdf");$(p).each((function(e){$(this).on("click",(function(){d=$(this).attr("data-pdf-link"),u=$(this).attr("data-tag"),f=$(this).attr("data-title"),console.log(d),$("#download-form").attr("pdf-link",d).attr("data-tag",u).attr("data-title",f)}))}));var h=document.querySelector(".audio-player");if(h){var b=function(e){var t=parseInt(e),o=parseInt(t/60);t-=60*o;var a=parseInt(o/60);return o-=60*a,0===a?"".concat(o,":").concat(String(t%60).padStart(2,0)):"".concat(String(a).padStart(2,0),":").concat(o,":").concat(String(t%60).padStart(2,0))},g=h.dataset.audio,y=new Audio(g);y.addEventListener("loadeddata",(function(){h.querySelector(".time .length").textContent=b(y.duration),y.volume=1}),!1);var v=h.querySelector(".timeline");v.addEventListener("click",(function(e){var t=window.getComputedStyle(v).width,o=e.offsetX/parseInt(t)*y.duration;y.currentTime=o}),!1);var m=h.querySelector(".controls .volume-slider");m.addEventListener("click",(function(e){var t=window.getComputedStyle(m).width,o=e.offsetX/parseInt(t);y.volume=o,h.querySelector(".controls .volume-percentage").style.width=100*o+"%"}),!1),setInterval((function(){h.querySelector(".progress").style.width=y.currentTime/y.duration*100+"%",h.querySelector(".time .current").textContent=b(y.currentTime)}),500);var k=h.querySelector(".controls .toggle-play"),j=h.querySelector(".controls .play-pause-img");k.addEventListener("click",(function(){y.paused?(k.classList.remove("play"),k.classList.add("pause"),j.src="/wp-content/themes/moc/images/blog/pause.png",y.play()):(k.classList.remove("pause"),k.classList.add("play"),j.src="/wp-content/themes/moc/images/blog/play.png",y.pause())}),!1),h.querySelector(".volume-button").addEventListener("click",(function(){var e=h.querySelector(".volume-container .volume");y.muted=!y.muted,y.muted?(e.classList.remove("icono-volumeMedium"),e.classList.add("icono-volumeMute")):(e.classList.add("icono-volumeMedium"),e.classList.remove("icono-volumeMute"))}))}}function getCookie(e){for(var t=e+"=",o=decodeURIComponent(document.cookie).split(";"),a=0;a<o.length;a++){for(var n=o[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}function searchPhrase(e){var t=$(".search-field").data("post-search");console.log(t),e.length>=2?jQuery.ajax({url:BASE+"/wp-admin/admin-ajax.php",type:"POST",data:{action:"ajax_search",term:e,postType:t},success:function(e){jQuery(".search-results").removeClass("hidden-state"),jQuery(".displayed-ajax-search").fadeIn().html(e),jQuery(".count").fadeIn(),$(".popular-searches-block").removeClass("show").height(0),jQuery(".search-spinner").hide(),jQuery(".search-field").blur(),setTimeout((function(){var e=jQuery(".search-result-count").text();jQuery(".results-count-info").text(e).slideDown(400)}),100)}}):e.length<=2&&(jQuery(".search-spinner").hide(),jQuery(".search-results").removeClass("hidden-state"),jQuery(".search-field").blur(),jQuery(".displayed-ajax-search").append("<div class='search-characters-error'><p class='search-characters-error__text'>Enter at least 2 characters to start searching</p><div class='search-characters-error__image-wrap'><img src='"+document.location.origin+"/wp-content/themes/moc/images/blog/typewriter.svg' alt='' class='search-characters-error__image'></div></div>"))}!function(){var e={action:"load_blog_post",postType:"post",url:"//".concat(window.location.host,"/wp-admin/admin-ajax.php"),currentPage:1,catId:"all"};function t(e,t){var o=$(t).hasClass("js-load-more"),a=$(t);$.ajax({url:e.url,data:e,type:"POST",success:function(t){if(o){a.parents(".load-more-btn-wrap").before(t),$(".post-item").fadeOut(0).fadeIn(400),a.parents(".load-more-btn-wrap").remove();var n=parseInt(a.data("max-page"));e.currentPage===n&&$(".load-more-btn-wrap").remove()}else"all"===e.catId?($(".blog-posts__list").html(t).addClass("first-load"),$(".post-item").fadeOut(0).fadeIn(400)):($(".blog-posts__list").html(t).removeClass("first-load"),$(".post-item").fadeOut(0).fadeIn(400))}})}$("body").on("dblclick",".js-load-post, .category-active",(function(e){e.preventDefault()})),$("body").on("click",".js-load-post",(function(){if(!$(this).hasClass("category-active")){var o=$(this),a=o.data("cat-id"),n=[];$(this).each((function(){o.hasClass("category-active")||o.addClass("category-active")})),$(".category-active").each((function(){var e=$(this).data("cat-id");n.push(e)})),a=0===(a=n).length?"all":n,e.currentPage=1,e.catId=a||"all",e.currentAction="filter",t(e,o)}})),$("body").on("click",".js-remove-active-state",(function(o){o.stopPropagation();var a=$(this),n=a.parents().data("cat-id"),s=[];$(this).each((function(){a.parents().hasClass("category-active")&&a.parents().removeClass("category-active")})),$(".category-active").each((function(){var e=$(this).data("cat-id");s.push(e)})),n=0===(n=s).length?"all":s,e.currentPage=1,e.catId=n||"all",e.currentAction="filter",t(e,a)})),$(document).click((function(e){$(e.target).is(".js-remove-active-state .close-btn")})),$(".ajax-container").on("click",".js-load-more",(function(){var o=$(this),a=o.data("cat-id"),n=parseInt(o.data("current-page"));e.postType="post",a&&(e.catId=a),n+=1,e.currentPage=n,e.currentAction="load",t(e,o)}))}(),jQuery((function(){jQuery(".search-field").keypress((function(e){13==(e.keyCode||e.which)&&(e.preventDefault(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&jQuery("#search-field").blur())}))}));var delay=function(){var e=0;return function(t,o){clearTimeout(e),e=setTimeout(t,o)}}();function blogLoaded(){blog()}$(".search-spinner").hide(),$("#search-field").on("input keyup",(function(){console.log("test search"),jQuery(".search-spinner").show(),$(".popular-searches-block").removeClass("show").height(0),jQuery(".displayed-ajax-search").empty(),jQuery(this).attr("autocomplete","off");var e=jQuery(this).val();delay((function(){searchPhrase(e)}),2e3)})),document.addEventListener("DOMContentLoaded",blogLoaded);
//# sourceMappingURL=moc-blog.js.map
